<div class="auto-detection-container">
  <div class="panel-content">
    <div class="inference-log" #inferenceLog>
      @if (inferenceHistory().length === 0) {
        <div class="log-empty">
          <i class="pi pi-info-circle" style="font-size: 3rem;"></i>
          <h4>No inference data yet</h4>
          <p>Click "Start" to begin auto-annotation. The agent will analyze your data and suggest labels.</p>
        </div>
      } @else {
        @for (log of inferenceHistory(); track $index) {
          <div class="log-entry" [ngClass]="'log-' + log.type">
            <div class="log-header">
              <div class="log-icon">
                <i [class]="getLogIcon(log.type)"></i>
              </div>
              <div class="log-meta">
                <span class="log-timestamp">{{ formatTimestamp(log.timestamp) }}</span>
                <span class="log-type">{{ log.type }}</span>
              </div>
            </div>
            <div class="log-message">
              @if (log.type === 'sent-message') {
                <span class="message-label">ðŸ’¬ Sent:</span>
              }
              @if (log.type === 'received-message') {
                <span class="message-label">ðŸ¤– Response:</span>
              }
              @if (log.type === 'agent-header') {
                <span class="agent-name">{{ log.message }}</span>
              } @else {
                {{ log.message }}
              }
            </div>
            @if (log.details && log.type !== 'agent-header') {
              <div class="log-details">
                <pre>{{ formatDetails(log.details) }}</pre>
              </div>
            }
          </div>
        }
      }
      
      @if (isRunning()) {
        <div class="log-entry log-running">
          <div class="log-header">
            <div class="log-icon">
              <i class="pi pi-spin pi-spinner"></i>
            </div>
            <div class="log-meta">
              <span class="log-type">Running...</span>
            </div>
          </div>
          <div class="log-message">
            Agent is processing data and generating labels...
          </div>
        </div>
      }
    </div>
  </div>
</div>
