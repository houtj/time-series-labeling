<div class="file-upload-container">
  <p-fileUpload
    #fileUpload
    name="fileUpload"
    [multiple]="true"
    [customUpload]="true"
    (uploadHandler)="onUploadHandler($event)"
    [disabled]="isUploading"
    accept=".xlsx,.xls,.csv"
  >
    <ng-template pTemplate="toolbar">
      <div class="upload-toolbar">
        <i class="pi pi-cloud-upload"></i>
        <span>{{ getStatusMessage() }}</span>
      </div>
    </ng-template>

    <ng-template pTemplate="content" let-files>
      <div class="upload-content">
        <!-- Show progress during upload -->
        @if (isUploading) {
          <div class="upload-progress">
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="uploadProgress"></div>
            </div>
            <span class="progress-text">{{ uploadProgress }}%</span>
          </div>
        }

        <!-- Show selected files (before or after upload) -->
        @if (files && files.length > 0) {
          <ul class="uploaded-files-list">
            @for (file of files; track file.name) {
              <li class="uploaded-file-item">
                @if (uploadProgress === 100) {
                  <i class="pi pi-check-circle"></i>
                } @else {
                  <i class="pi pi-file"></i>
                }
                <span>{{ file.name }}</span>
                <span class="file-size">{{ formatFileSize(file.size) }}</span>
              </li>
            }
          </ul>
        } @else if (!isUploading) {
          <!-- Show instructions when idle -->
          <div class="upload-instructions">
            <i class="pi pi-inbox"></i>
            <p>No files selected</p>
            <p class="help-text">Supported formats: .xlsx, .xls, .csv</p>
          </div>
        }
      </div>
    </ng-template>
  </p-fileUpload>
</div>
