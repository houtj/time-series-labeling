<div class="card profile-page">
    <div class="profile-area">
        <div class="top-area">
            <div class="card-area top-card-area" style="flex-grow: 2;">
                <div class="card-header">
                    Level - {{(databaseService.userInfo$|async)?.badge}}
                </div>
                <div class="badge-area">
                    <img [alt]="(databaseService.userInfo$|async)?.badge" [src]='imgSrc' style="height: 140px; width: 140px; margin: auto; display: block;"/>
                </div>
                <div class="card-content">
                    <p>Active since: {{(databaseService.userInfo$|async)?.activeSince?.$date|date:'short'}}</p>
                    <p pTooltip="The rank is refreshed every 24 hours."> Your rank is: {{(databaseService.userInfo$|async)?.rank}}</p> 
                </div>
            </div>
            <div class="card-area top-card-area" style="flex-grow: 3;">
                <div class="card-header">
                    Recent Files
                </div>
                <div class="card-content">
                    <div *ngIf="userInfo!==undefined&&userInfo?.recent!==undefined&&userInfo?.recent!.length!==0">
                        <ul>
                            <li class="list-content" *ngFor="let recentFile of userInfo.recent!" (click)="onClickRecentFile($event, recentFile)">{{recentFile.displayText}}</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="card-area top-card-area" style="flex-grow: 3;">
                <div class="card-header">
                    Messages
                </div>
                <div class="card-content">
                    <div *ngIf="userInfo!==undefined&&userInfo?.message!==undefined&&userInfo?.message!.length!==0">
                        <ul>
                            <li class="list-content" *ngFor="let message of userInfo.message!" (click)="onClickMessage($event, message)">{{message.displayText}}</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="card-area top-card-area" style="flex-grow: 2;">
                <div class="card-header">
                    Contribution
                </div>
                <div class="card-content">
                    <div #chart id="myChartDiv" style="height: 100%;"></div>
                </div>
            </div>
        </div>
        <div class="bottom-area">
            <div class="card-area" style="flex-grow: 7; overflow:hidden;">
                <p-table [value]="folderList!" sortMode="multiple" [scrollable]="true" scrollHeight="flex">
                    <ng-template pTemplate="caption">
                        Folders
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="name">Name<p-sortIcon field="name"></p-sortIcon></th>
                            <th pSortableColumn="nbLabeledFiles">Labeled Files<p-sortIcon field="nbLabeledFiles"></p-sortIcon></th>
                            <th pSortableColumn="nbTotalFiles">Total Files<p-sortIcon field="nbTotalFiles"></p-sortIcon></th>
                            <th pSortableColumn="project.name">Project<p-sortIcon field="project.name"></p-sortIcon></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-folder>
                        <tr>
                            <td>{{folder.name}}</td>
                            <td>{{folder.nbLabeledFiles}}</td>
                            <td>{{folder.nbTotalFiles}}</td>
                            <td>{{folder.project.name}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <!-- <div class="assistant-area">
                <p-table [value]="assistantList!" [tableStyle]="{'min-width': '10rem'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Name</th>
                            <th>Project</th>
                            <th>Version</th>
                            <th>accuracy</th>
                            
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-assistant>
                        <tr>
                            <td>{{assistant.name}}</td>
                            <td>{{assistant.projectName}}</td>
                            <td>{{assistant.version}}</td>
                            <td>{{assistant.accuracy}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div> -->
            <div class="card-area" style="flex-grow: 3; overflow: hidden;">
                <p-table 
                    [value]="projectList!" 
                    sortMode="multiple"
                    [scrollable]="true"
                    scrollHeight="flex"
                >
                    <ng-template pTemplate="caption">
                        Projects
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-project>
                        <tr>
                            <td>{{project.projectName}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>
